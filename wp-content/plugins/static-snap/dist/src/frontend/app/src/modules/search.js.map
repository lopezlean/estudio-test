{"version":3,"file":"search.js","sourceRoot":"","sources":["../../../../../../src/frontend/app/src/modules/search.ts"],"names":[],"mappings":";;;AAEA,4EAA6C;AAE7C;IAIE,gBAAY,QAAkB;QAHtB,YAAO,GAAmB,EAAE,CAAC;QAInC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,SAAS,GAAG,IAAI,oBAAS,CAAC,IAAI,CAAC,CAAC;IACvC,CAAC;IAEM,0BAAS,GAAhB,UAAiB,MAAoB;QACnC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC5B,CAAC;IAEO,gCAAe,GAAvB;QACE,IAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC;QAErD,IAAM,gBAAgB,GAAG,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,IAAI,KAAI,SAAS,CAAC;QAEnD,IAAM,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,UAAC,MAAM,IAAK,OAAA,MAAM,CAAC,OAAO,EAAE,KAAK,gBAAgB,EAArC,CAAqC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/F,IAAI,CAAC,YAAY,EAAE,CAAC;YAClB,MAAM,IAAI,KAAK,CAAC,wBAAiB,gBAAgB,eAAY,CAAC,CAAC;QACjE,CAAC;QACD,OAAO,YAAY,CAAC;IACtB,CAAC;IAEY,uBAAM,GAAnB,UAAoB,KAAa;;;gBAC/B,sBAAO,IAAI,CAAC,eAAe,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,EAAC;;;KAC7C;IAEY,8BAAa,GAA1B,UAA2B,MAAmB,EAAE,OAAgB;;;gBAC9D,IAAI,CAAC,eAAe,EAAE,CAAC,aAAa,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;;;;KACvD;IAEM,6BAAY,GAAnB;QACE,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IACH,aAAC;AAAD,CAAC,AApCD,IAoCC","sourcesContent":["import Frontend from '../frontend';\nimport SearchModule from '../interfaces/search-module.interface';\nimport SearchBox from '../search/search-box';\n\nexport default class Search {\n  private modules: SearchModule[] = [];\n  private frontend: Frontend;\n  private searchBox: SearchBox;\n  constructor(frontend: Frontend) {\n    this.frontend = frontend;\n    this.searchBox = new SearchBox(this);\n  }\n\n  public addModule(module: SearchModule) {\n    this.modules.push(module);\n  }\n\n  private getSearchModule() {\n    const search = this.frontend.config().options.search;\n\n    const searchModuleType = search?.type || 'fuse-js';\n\n    const searchModule = this.modules.filter((module) => module.getType() === searchModuleType)[0];\n    if (!searchModule) {\n      throw new Error(`Search module ${searchModuleType} not found`);\n    }\n    return searchModule;\n  }\n\n  public async search(query: string) {\n    return this.getSearchModule().search(query);\n  }\n\n  public async renderResults(target: HTMLElement, results: unknown) {\n    this.getSearchModule().renderResults(target, results);\n  }\n\n  public getSearchBox() {\n    return this.searchBox;\n  }\n}\n"]}