{"version":3,"file":"edit.js","sourceRoot":"","sources":["../../../../../../../src/dashboard/app/src/pages/environments/edit.tsx"],"names":[],"mappings":";;;;AAAA,+BAAyD;AAEzD,2EAA4C;AAC5C,wCAAqC;AACrC,qDAA0D;AAE1D,8HAA8F;AAI9F,SAAwB,gBAAgB;IACtC,IAAM,QAAQ,GAAG,IAAA,8BAAW,GAAE,CAAC;IAC/B,IAAM,MAAM,GAAG,IAAA,4BAAS,GAAE,CAAC;IAErB,IAAA,KAAgC,IAAA,gBAAQ,GAAwB,EAA/D,WAAW,QAAA,EAAE,cAAc,QAAoC,CAAC;IACjE,IAAA,KAAsB,IAAA,gBAAQ,EAAyB,EAAE,CAAC,EAAzD,MAAM,QAAA,EAAE,SAAS,QAAwC,CAAC;IAC3D,IAAA,KAAwB,IAAA,gBAAQ,EAAC,IAAI,CAAC,EAArC,OAAO,QAAA,EAAE,UAAU,QAAkB,CAAC;IAC7C,IAAM,WAAW,GAAG,IAAA,mBAAW,EAAC;QAC9B,IAAA,mBAAQ,EAAC,EAAE,IAAI,EAAE,+BAA+B,GAAG,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,WAAW;YAC/E,cAAc,CAAC,WAAmC,CAAC,CAAC;YACpD,UAAU,CAAC,KAAK,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;IAEhB,IAAA,iBAAS,EAAC;QACR,WAAW,EAAE,CAAC;IAChB,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;IAElB,IAAM,QAAQ,GAAG,UAAC,IAA0B;QAC1C,IAAI,CAAC,EAAE,GAAG,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,EAAY,CAAC;QAC/B,IAAA,mBAAQ,EAAC;YACP,IAAI,MAAA;YACJ,MAAM,EAAE,OAAO;YACf,IAAI,EAAE,8BAA8B;SACrC,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;YACf,IAAI,QAAQ,IAAI,OAAO,QAAQ,KAAK,QAAQ,IAAK,QAAmC,CAAC,MAAM,EAAE,CAAC;gBAC5F,IAAM,aAAa,GAAG,QAAkC,CAAC;gBACzD,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;gBAChC,OAAO;YACT,CAAC;YAED,IAAI,CAAC,CAAC,QAAQ,KAAK,IAAI,EAAE,CAAC;gBACxB,QAAQ,CAAC,eAAe,CAAC,CAAC;YAC5B,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;IAEF,IAAM,QAAQ,GAAG,UAAC,IAA0B;QAC1C,iBAAiB;QACjB,IAAM,aAAa,GAAG,MAAM,CAAC,OAAO,CAClC,IAAA,SAAE,EAAC,mDAAmD,EAAE,aAAa,CAAC,CACvE,CAAC;QACF,IAAI,CAAC,aAAa,EAAE,CAAC;YACnB,OAAO;QACT,CAAC;QACD,IAAI,CAAC,EAAE,GAAG,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,EAAY,CAAC;QAC/B,IAAA,mBAAQ,EAAC;YACP,IAAI,MAAA;YACJ,MAAM,EAAE,QAAQ;YAChB,IAAI,EAAE,8BAA8B;SACrC,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;YACf,IAAI,CAAC,CAAC,QAAQ,KAAK,IAAI,EAAE,CAAC;gBACxB,QAAQ,CAAC,eAAe,CAAC,CAAC;YAC5B,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;IACF,OAAO,CACL,2DACG,CAAC,OAAO,IAAI,CACX,uBAAC,2BAAe,IACd,KAAK,EAAC,kBAAkB,EACxB,QAAQ,EAAE,QAAQ,EAClB,QAAQ,EAAE,QAAQ,EAClB,KAAK,EAAE,WAAW,EAClB,MAAM,EAAE,MAAM,GACd,CACH,GACA,CACJ,CAAC;AACJ,CAAC;AArED,mCAqEC","sourcesContent":["import { useEffect, useState, useCallback } from 'react';\n\nimport apiFetch from '@wordpress/api-fetch';\nimport { __ } from '@wordpress/i18n';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport EnvironmentForm from '@staticsnap/dashboard/components/environments/environments-form';\nimport EnvironmentInterface from '@staticsnap/dashboard/interfaces/environment.interface';\nimport ErrorResponseInterface from '@staticsnap/dashboard/interfaces/error-response.interface';\n\nexport default function EnvironmentsEdit() {\n  const navigate = useNavigate();\n  const params = useParams();\n\n  const [environment, setEnvironment] = useState<EnvironmentInterface>();\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [loading, setLoading] = useState(true);\n  const getSettings = useCallback(() => {\n    apiFetch({ path: '/static-snap/v1/environments/' + params.id }).then((environment) => {\n      setEnvironment(environment as EnvironmentInterface);\n      setLoading(false);\n    });\n  }, [params.id]);\n\n  useEffect(() => {\n    getSettings();\n  }, [getSettings]);\n\n  const onSubmit = (data: EnvironmentInterface) => {\n    data.id = params?.id as string;\n    apiFetch({\n      data,\n      method: 'PATCH',\n      path: '/static-snap/v1/environments',\n    }).then((response) => {\n      if (response && typeof response === 'object' && (response as ErrorResponseInterface).errors) {\n        const errorResponse = response as ErrorResponseInterface;\n        setErrors(errorResponse.errors);\n        return;\n      }\n\n      if (!!response === true) {\n        navigate('/environments');\n      }\n    });\n  };\n\n  const onDelete = (data: EnvironmentInterface) => {\n    // confirm delete\n    const confirmDelete = window.confirm(\n      __('Are you sure you want to delete this environment?', 'static-snap')\n    );\n    if (!confirmDelete) {\n      return;\n    }\n    data.id = params?.id as string;\n    apiFetch({\n      data,\n      method: 'DELETE',\n      path: '/static-snap/v1/environments',\n    }).then((response) => {\n      if (!!response === true) {\n        navigate('/environments');\n      }\n    });\n  };\n  return (\n    <>\n      {!loading && (\n        <EnvironmentForm\n          title=\"Edit Environment\"\n          onSubmit={onSubmit}\n          onDelete={onDelete}\n          value={environment}\n          errors={errors}\n        />\n      )}\n    </>\n  );\n}\n"]}