{"version":3,"file":"environment-pane.js","sourceRoot":"","sources":["../../../../../../../src/dashboard/app/src/components/environments-tabs/environment-pane.tsx"],"names":[],"mappings":";;;;AAAA,+BAAoC;AAEpC,kEAAoC;AACpC,wEAA0C;AAC1C,gFAAkD;AAClD,4FAA8D;AAE9D,2EAA4C;AAC5C,wCAA8C;AAO9C,SAAwB,eAAe,CAAC,EAAuD;IAA/F,iBAuCC;QAvCyC,WAAW,iBAAA,EAAE,gBAAgB,EAAhB,QAAQ,mBAAG,KAAK,KAAA;IACrE,IAAM,OAAO,GAAG,IAAA,mBAAW,EAAC;;YAC1B,+CAA+C;YAC/C,MAAM,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,mCAAmC,CAAC,CAAC,CAAC;YAC3E,UAAU,CAAC;gBACT,8CAA8C;gBAC9C,IAAM,KAAK,GAAG,IAAI,WAAW,CAAC,2BAA2B,CAAC,CAAC;gBAC3D,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC9B,CAAC,EAAE,GAAG,CAAC,CAAC;YACR,IAAA,mBAAQ,EAAC;gBACP,IAAI,EAAE,WAAW;gBACjB,MAAM,EAAE,MAAM;gBACd,IAAI,EAAE,sCAAsC;aAC7C,CAAC,CAAC;;;SACJ,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;IAElB,IAAM,mBAAmB,GAAG,IAAA,mBAAW,EAAC;QACtC,+CAA+C;QAC/C,MAAM,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,mCAAmC,CAAC,CAAC,CAAC;QAC3E,MAAM,CAAC,QAAQ,CAAC,IAAI;YAClB,MAAM,CAAC,QAAQ,CAAC,MAAM;gBACtB,kEAA2D,WAAW,CAAC,EAAE,CAAE,CAAC;IAChF,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;IAElB,OAAO,CACL,wBAAC,aAAG,IAAC,aAAa,EAAC,KAAK,EAAC,cAAc,EAAC,eAAe,EAAC,KAAK,EAAE,MAAM,EAAE,OAAO,EAAC,MAAM,aACnF,uBAAC,gBAAM,IACL,OAAO,EAAC,WAAW,EACnB,OAAO,EAAE,OAAO,EAChB,OAAO,EAAE,uBAAC,cAAI,IAAC,IAAI,EAAC,sBAAsB,GAAG,EAC7C,QAAQ,EAAE,QAAQ,YAEjB,IAAA,cAAO,EAAC,IAAA,SAAE,EAAC,cAAc,EAAE,aAAa,CAAC,EAAE,WAAW,CAAC,IAAI,CAAC,GACtD,EACT,uBAAC,oBAAU,IAAC,KAAK,EAAE,IAAA,SAAE,EAAC,UAAU,EAAE,aAAa,CAAC,EAAE,OAAO,EAAE,mBAAmB,YAC5E,uBAAC,cAAI,IAAC,IAAI,EAAC,2BAA2B,GAAG,GAC9B,IACT,CACP,CAAC;AACJ,CAAC;AAvCD,kCAuCC","sourcesContent":["import { useCallback } from 'react';\n\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nimport IconButton from '@mui/material/IconButton';\nimport Icon from '@staticsnap/dashboard/components/icon/icon';\nimport EnvironmentInterface from '@staticsnap/dashboard/interfaces/environment.interface';\nimport apiFetch from '@wordpress/api-fetch';\nimport { __, sprintf } from '@wordpress/i18n';\n\ntype EnvironmentPaneProps = {\n  environment: EnvironmentInterface;\n  disabled?: boolean;\n};\n\nexport default function EnvironmentPane({ environment, disabled = false }: EnvironmentPaneProps) {\n  const publish = useCallback(async () => {\n    // emit static-snap/close-deployment-menu event\n    window.dispatchEvent(new CustomEvent('static-snap/close-deployment-menu'));\n    setTimeout(() => {\n      // emit window event static-snap-status-update\n      const event = new CustomEvent('static-snap/status-update');\n      window.dispatchEvent(event);\n    }, 500);\n    apiFetch({\n      data: environment,\n      method: 'POST',\n      path: '/static-snap/v1/environments/publish',\n    });\n  }, [environment]);\n\n  const handleSettingsClick = useCallback(() => {\n    // emit static-snap/close-deployment-menu event\n    window.dispatchEvent(new CustomEvent('static-snap/close-deployment-menu'));\n    window.location.href =\n      window.location.origin +\n      `/wp-admin/admin.php?page=static-snap#/environments/edit/${environment.id}`;\n  }, [environment]);\n\n  return (\n    <Box flexDirection=\"row\" justifyContent=\"space-between\" width={'100%'} display=\"flex\">\n      <Button\n        variant=\"contained\"\n        onClick={publish}\n        endIcon={<Icon icon=\"grommet-icons:deploy\" />}\n        disabled={disabled}\n      >\n        {sprintf(__('Deploy to %s', 'static-snap'), environment.name)}\n      </Button>\n      <IconButton title={__('Settings', 'static-snap')} onClick={handleSettingsClick}>\n        <Icon icon=\"material-symbols:settings\" />\n      </IconButton>\n    </Box>\n  );\n}\n"]}