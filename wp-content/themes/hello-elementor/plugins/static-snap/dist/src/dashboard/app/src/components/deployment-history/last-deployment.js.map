{"version":3,"file":"last-deployment.js","sourceRoot":"","sources":["../../../../../../../src/dashboard/app/src/components/deployment-history/last-deployment.tsx"],"names":[],"mappings":";;;;AAAA,+BAA4C;AAE5C,kEAAoC;AACpC,oEAAsC;AACtC,kFAAoD;AACpD,gFAAkD;AAClD,4EAA8C;AAE9C,2EAA4C;AAC5C,wCAAqC;AAMrC,IAAM,cAAc,GAAG,UAAC,EAAuC;QAArC,cAAc,oBAAA;IAChC,IAAA,KAAsC,IAAA,gBAAQ,EAA6B,IAAI,CAAC,EAA/E,cAAc,QAAA,EAAE,iBAAiB,QAA8C,CAAC;IACjF,IAAA,KAAoD,IAAA,gBAAQ,EAAU,IAAI,CAAC,EAA1E,qBAAqB,QAAA,EAAE,wBAAwB,QAA2B,CAAC;IAElF,IAAA,iBAAS,EAAC;QACR,IAAM,iBAAiB,GAAG;;;;4BACP,qBAAM,IAAA,mBAAQ,EAAC;4BAC9B,IAAI,EAAE,mDAA4C,cAAc,CAAE;yBACnE,CAAC,EAAA;;wBAFI,QAAQ,GAAG,SAEf;wBACF,iBAAiB,CAAC,QAA+B,CAAC,CAAC;wBACnD,wBAAwB,CAAC,KAAK,CAAC,CAAC;;;;aACjC,CAAC;QACF,iBAAiB,EAAE,CAAC;IACtB,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC;IAErB,IAAM,UAAU,GAAG,CAAA,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,UAAU;QAC3C,CAAC,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,UAAU,CAAC,GAAG,IAAI,CAAC,CAAC,cAAc,EAAE;QACtE,CAAC,CAAC,IAAI,CAAC;IACT,IAAM,QAAQ,GAAG,CAAA,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,QAAQ;QACvC,CAAC,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,QAAQ,CAAC,GAAG,IAAI,CAAC,CAAC,cAAc,EAAE;QACpE,CAAC,CAAC,IAAI,CAAC;IAET,OAAO,CACL,uBAAC,aAAG,cACD,qBAAqB,CAAC,CAAC,CAAC,CACvB,uBAAC,kBAAQ,IAAC,OAAO,EAAC,aAAa,EAAC,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE,GAAI,CAC9D,CAAC,CAAC,CAAC,CACF,CAAA,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,EAAE,KAAI,CACpB,wBAAC,cAAI,IAAC,OAAO,EAAC,UAAU,EAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,aACpC,uBAAC,oBAAU,IAAC,KAAK,EAAE,IAAA,SAAE,EAAC,oBAAoB,EAAE,aAAa,CAAC,GAAI,EAC9D,wBAAC,qBAAW,eACV,0CACG,IAAA,SAAE,EAAC,aAAa,EAAE,aAAa,CAAC,EACjC,oDAAU,UAAU,IAAU,IAC5B,EACJ,0CACG,IAAA,SAAE,EAAC,WAAW,EAAE,aAAa,CAAC,EAC/B,oDAAU,QAAQ,IAAU,IAC1B,EACJ,0CACG,IAAA,SAAE,EAAC,aAAa,EAAE,aAAa,CAAC,EACjC,+CACG,GAAG,EACH,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,eAAe,QAAI,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,gBAAgB,SAC7D,IACP,IACQ,IACT,CACR,CACF,GACG,CACP,CAAC;AACJ,CAAC,CAAC;AAEF,kBAAe,cAAc,CAAC","sourcesContent":["import { useEffect, useState } from 'react';\n\nimport Box from '@mui/material/Box';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport CardHeader from '@mui/material/CardHeader';\nimport Skeleton from '@mui/material/Skeleton';\nimport DeploymentInterface from '@staticsnap/dashboard/interfaces/deployment.interface';\nimport apiFetch from '@wordpress/api-fetch';\nimport { __ } from '@wordpress/i18n';\n\ntype LastDeploymentProps = {\n  environment_id: number;\n};\n\nconst LastDeployment = ({ environment_id }: LastDeploymentProps) => {\n  const [lastDeployment, setLastDeployment] = useState<DeploymentInterface | null>(null);\n  const [lastDeploymentLoading, setLastDeploymentLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    const getLastDeployment = async () => {\n      const response = await apiFetch({\n        path: `/static-snap/v1/deployments-history/last/${environment_id}`,\n      });\n      setLastDeployment(response as DeploymentInterface);\n      setLastDeploymentLoading(false);\n    };\n    getLastDeployment();\n  }, [environment_id]);\n\n  const start_date = lastDeployment?.start_time\n    ? new Date(Number(lastDeployment?.start_time) * 1000).toLocaleString()\n    : null;\n  const end_date = lastDeployment?.end_time\n    ? new Date(Number(lastDeployment?.end_time) * 1000).toLocaleString()\n    : null;\n\n  return (\n    <Box>\n      {lastDeploymentLoading ? (\n        <Skeleton variant=\"rectangular\" width={'100%'} height={35} />\n      ) : (\n        lastDeployment?.id && (\n          <Card variant=\"outlined\" sx={{ mt: 4 }}>\n            <CardHeader title={__('Lastest Deployment', 'static-snap')} />\n            <CardContent>\n              <p>\n                {__('Start date:', 'static-snap')}\n                <strong> {start_date}</strong>\n              </p>\n              <p>\n                {__('End date:', 'static-snap')}\n                <strong> {end_date}</strong>\n              </p>\n              <p>\n                {__('Created by:', 'static-snap')}\n                <strong>\n                  {' '}\n                  {lastDeployment?.created_by_name} ({lastDeployment?.created_by_email})\n                </strong>\n              </p>\n            </CardContent>\n          </Card>\n        )\n      )}\n    </Box>\n  );\n};\n\nexport default LastDeployment;\n"]}